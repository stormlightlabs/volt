<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Validation - Volt.js Example</title>
    <link rel="stylesheet" href="../dist/volt.min.css">
    <style>
      .error {
        color: var(--color-error);
        font-size: var(--font-size-sm);
        margin-top: calc(-1 * var(--space-sm));
        margin-bottom: var(--space-md);
      }

      .success {
        padding: var(--space-md);
        background: var(--color-bg-alt);
        border-left: 4px solid var(--color-success);
        border-radius: var(--radius-md);
        margin: var(--space-lg) 0;
      }

      .form-group {
        margin-bottom: var(--space-md);
      }

      input.invalid {
        border-color: var(--color-error);
      }

      input.valid {
        border-color: var(--color-success);
      }
    </style>
  </head>
  <body>
    <article
      data-volt
      data-volt-state='{"email": "", "password": "", "confirmPassword": "", "agreedToTerms": false, "submitted": false}'
      data-volt-computed:email-valid="email.length > 0 && email.includes('@') && email.includes('.')"
      data-volt-computed:password-valid="password.length >= 8"
      data-volt-computed:passwords-match="password === confirmPassword && confirmPassword.length > 0"
      data-volt-computed:form-valid="emailValid && passwordValid && passwordsMatch && agreedToTerms">
      <h1>Sign Up</h1>
      <p>
        Create your account with real-time validation. All validation rules are defined in HTML using computed
        expressions.
      </p>

      <form data-volt-on-submit="submitted.set(true); $event.preventDefault()">
        <div class="form-group">
          <label for="email">Email Address</label>
          <input
            type="email"
            id="email"
            required
            data-volt-model="email"
            data-volt-class="{valid: email.length > 0 && emailValid, invalid: email.length > 0 && !emailValid}"
            placeholder="you@example.com">
          <div class="error" data-volt-if="email.length > 0 && !emailValid">
            Please enter a valid email address.
          </div>
        </div>

        <div class="form-group">
          <label for="password">Password</label>
          <input
            type="password"
            id="password"
            required
            data-volt-model="password"
            data-volt-class="{valid: passwordValid, invalid: password.length > 0 && !passwordValid}"
            placeholder="At least 8 characters">
          <div class="error" data-volt-if="password.length > 0 && !passwordValid">
            Password must be at least 8 characters long.
          </div>
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirm Password</label>
          <input
            type="password"
            id="confirmPassword"
            required
            data-volt-model="confirmPassword"
            data-volt-class="{valid: passwordsMatch, invalid: confirmPassword.length > 0 && !passwordsMatch}"
            placeholder="Re-enter your password">
          <div class="error" data-volt-if="confirmPassword.length > 0 && !passwordsMatch">
            Passwords do not match.
          </div>
        </div>

        <div class="form-group">
          <label>
            <input type="checkbox" data-volt-model="agreedToTerms" required>
            I agree to the terms and conditions
          </label>
        </div>

        <button type="submit" data-volt-bind:disabled="!formValid">
          Create Account
        </button>
      </form>

      <div class="success" data-volt-if="submitted && formValid">
        <strong>Success!</strong> Your account has been created.
        <details>
          <summary>Form Data</summary>
          <dl>
            <dt>Email</dt>
            <dd data-volt-text="email"></dd>
            <dt>Password</dt>
            <dd>••••••••</dd>
            <dt>Terms Accepted</dt>
            <dd data-volt-text="agreedToTerms ? 'Yes' : 'No'"></dd>
          </dl>
        </details>
      </div>

      <details style="margin-top: var(--space-xs);">
        <summary>View Current State</summary>
        <pre>
          <code>{
  "email": "<span data-volt-text="email"></span>",
  "password": "<span data-volt-text="password"></span>",
  "confirmPassword": "<span data-volt-text="confirmPassword"></span>",
  "agreedToTerms": <span data-volt-text="agreedToTerms"></span>,
  "submitted": <span data-volt-text="submitted"></span>,
  "emailValid": <span data-volt-text="emailValid"></span>,
  "passwordValid": <span data-volt-text="passwordValid"></span>,
  "passwordsMatch": <span data-volt-text="passwordsMatch"></span>,
  "formValid": <span data-volt-text="formValid"></span>
}</code>
</pre>
      </details>
    </article>

    <script type="module">
      import { charge } from "./../dist/volt.min.js";
      charge();
    </script>
  </body>
</html>
